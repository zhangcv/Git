<!DOCTYPE html><html class="theme-next muse use-motion" lang="en"><head><meta name="generator" content="Hexo 3.8.0"><script type="text/javascript" src="/js/love.js"></script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/VEN/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/VEN/pace/pace-theme-minimal.min.css?v=1.0.2"><link rel="stylesheet" href="/VEN/font-awesome/css/font-awesome.min.css?v=4.6.2"><link rel="stylesheet" href="/css/main.css?v=7.0.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1"><link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"7.0.1",sidebar:{position:"left",display:"hide",offset:12,onmobile:!1,dimmer:!0},back2top:!0,back2top_sidebar:!1,fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="Pythonpython运算符除法运算 (/) 永远返回浮点数类型// 运算符 得到一个整数结果（忽略小数部分）  ** 运算符来计算乘方 您也可以这么理解切片：将索引视作指向字符之间，第一个字符的左侧标为0，最后一个字符的右侧标为 n ，其中 n 是字符串长度。例如:12345 +---+---+---+---+---+---+ | P | y | t | h | o | n | +---+--"><meta name="keywords" content="python"><meta property="og:type" content="article"><meta property="og:title" content="python-selenium"><meta property="og:url" content="http://zhangcv.github.io/2019/10/14/2019-10-14/index.html"><meta property="og:site_name" content="Zhangcv&#39;s Personal Website"><meta property="og:description" content="Pythonpython运算符除法运算 (/) 永远返回浮点数类型// 运算符 得到一个整数结果（忽略小数部分）  ** 运算符来计算乘方 您也可以这么理解切片：将索引视作指向字符之间，第一个字符的左侧标为0，最后一个字符的右侧标为 n ，其中 n 是字符串长度。例如:12345 +---+---+---+---+---+---+ | P | y | t | h | o | n | +---+--"><meta property="og:locale" content="en"><meta property="og:updated_time" content="2019-10-17T04:29:26.834Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="python-selenium"><meta name="twitter:description" content="Pythonpython运算符除法运算 (/) 永远返回浮点数类型// 运算符 得到一个整数结果（忽略小数部分）  ** 运算符来计算乘方 您也可以这么理解切片：将索引视作指向字符之间，第一个字符的左侧标为0，最后一个字符的右侧标为 n ，其中 n 是字符串长度。例如:12345 +---+---+---+---+---+---+ | P | y | t | h | o | n | +---+--"><link rel="canonical" href="http://zhangcv.github.io/2019/10/14/2019-10-14/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>python-selenium | Zhangcv's Personal Website</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Zhangcv's Personal Website</span><span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"> <button aria-label="Toggle navigation bar"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i><br>Tags<span class="badge">17</span></a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i><br>Categories<span class="badge">18</span></a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives<span class="badge">100</span></a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i><br>Commonweal 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav><script>window.onload=function(){for(var t="https://zhangcv.github.io/",o=String(window.location).split(t)[1],l=document.querySelectorAll("#menu > li > a"),i=0;i<l.length;i++){var n=String(l[i].href).split(t)[1];n==o&&null!=n&&l[i].setAttribute("style","border-bottom:1px solid black")}}</script></div> <a href="https://github.com/zhangcv" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://zhangcv.github.io/2019/10/14/2019-10-14/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Jack"><meta itemprop="description" content="Jack's Ideas & Blogs"><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Zhangcv's Personal Website"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">python-selenium</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-10-14 21:31:30" itemprop="dateCreated datePublished" datetime="2019-10-14T21:31:30+08:00">2019-10-14</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="python运算符"><a href="#python运算符" class="headerlink" title="python运算符"></a>python运算符</h3><p>除法运算 (/) 永远返回浮点数类型<br>// 运算符 得到一个整数结果（忽略小数部分）<br> <code>**</code> 运算符来计算乘方<br> 您也可以这么理解切片：将索引视作指向字符之间，第一个字符的左侧标为0，最后一个字符的右侧标为 n ，其中 n 是字符串长度。例如:<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> +---+---+---+---+---+---+</span><br><span class="line"> | P | y | t | h | o | n |</span><br><span class="line"> +---+---+---+---+---+---+</span><br><span class="line"> 0   1   2   3   4   5   6</span><br><span class="line">-6  -5  -4  -3  -2  -1</span><br></pre></td></tr></table></figure><p></p><p>内建函数 len() 返回一个字符串的长度:</p><p>与 immutable 的字符串不同, 列表是一个 mutable 类型，就是说，它自己的内容可以改变:<br>str[3] = 54<br>str<br>[1,2,3,54,6]<br>也可以在列表末尾通过 append() 方法 来添加新元素</p><p>切片的方法<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">给切片赋值也是可以的，这样甚至可以改变列表大小，或者把列表整个清空:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># replace some values</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters[<span class="number">2</span>:<span class="number">5</span>] = [<span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># now remove them</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters[<span class="number">2</span>:<span class="number">5</span>] = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters</span><br><span class="line">[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'f'</span>, <span class="string">'g'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># clear the list by replacing all the elements with an empty list</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters[:] = []</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>letters</span><br><span class="line">[]</span><br></pre></td></tr></table></figure><p></p><p>斐波那契<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Fibonacci series:</span></span><br><span class="line"><span class="meta">... </span><span class="comment"># the sum of two elements defines the next</span></span><br><span class="line"><span class="meta">... </span>a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a &lt; <span class="number">10</span>:</span><br><span class="line"><span class="meta">... </span>    print(a)</span><br><span class="line"><span class="meta">... </span>    a, b = b, a+b</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><p></p><p>关键字参数 end 可以用来取消输出后面的换行, 或使用另外一个字符串来结尾:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> a &lt; <span class="number">1000</span>:</span><br><span class="line"><span class="meta">... </span>    print(a, end=<span class="string">','</span>)</span><br><span class="line"><span class="meta">... </span>    a, b = b, a+b</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">21</span>,<span class="number">34</span>,<span class="number">55</span>,<span class="number">89</span>,<span class="number">144</span>,<span class="number">233</span>,<span class="number">377</span>,<span class="number">610</span>,<span class="number">987</span>,</span><br></pre></td></tr></table></figure><h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><p>range()<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line"><span class="meta">... </span>    print(i)</span><br><span class="line">...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> range(len(str))</span><br><span class="line">	print(i,str[i])</span><br></pre></td></tr></table></figure><p></p><h3 id="Selenium的介绍及使用"><a href="#Selenium的介绍及使用" class="headerlink" title="Selenium的介绍及使用"></a>Selenium的介绍及使用</h3><p>配置了Python 按下<br>1 pip install selenium<br>2 Chrome驱动文件</p><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Selenium的调用</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"> </span><br><span class="line"><span class="comment">## 如果是chrome浏览器的驱动</span></span><br><span class="line">driver=webdriver.Chrome(<span class="string">"G:\Anaconda3-5.3.0\chromedriver.exe"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">##如果是firefox浏览器的驱动</span></span><br><span class="line">driver=webdriver.Firefox(executable_path=<span class="string">"G:\Anaconda3-5.3.0\geckodriver.exe"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">######如果浏览器驱动的目录加入了环境变量的话</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">## 如果是chrome浏览器的驱动</span></span><br><span class="line">driver=webdriver.Chrome()</span><br><span class="line"> </span><br><span class="line"><span class="comment">##如果是firefox浏览器的驱动</span></span><br><span class="line">driver=webdriver.Firefox()</span><br></pre></td></tr></table></figure><p>启动浏览器 ，爬<span class="exturl" data-url="aHR0cHM6Ly93d3cudGFvYmFvLmNvbS8=" title="https://www.taobao.com/">https://www.taobao.com/<i class="fa fa-external-link"></i></span><br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment"># 有界面</span></span><br><span class="line">option = webdriver.ChromeOptions()</span><br><span class="line"><span class="comment"># 使用headless无界面浏览器模式</span></span><br><span class="line">chrome_options = webdriver.ChromeOptions()</span><br><span class="line"></span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)  <span class="comment"># 增加无界面选项</span></span><br><span class="line">chrome_options.add_argument(<span class="string">'--disable-gpu'</span>)  <span class="comment"># 如果不加这个选项，有时定位会出现问题</span></span><br><span class="line"></span><br><span class="line">option.add_argument(<span class="string">'--user-data-dir=C:\MyChromeDevUserData'</span>) <span class="comment"># 设置成用户自己的数据目录</span></span><br><span class="line">driver=webdriver.Chrome(chrome_options=option)</span><br><span class="line"></span><br><span class="line">driver.get(<span class="string">"https:www.taobao.com/"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">f"brower text=<span class="subst">&#123;driver.page_source&#125;</span>"</span>)  <span class="comment">#打印网页源码</span></span><br></pre></td></tr></table></figure><p></p><p>启动项配置</p><table><thead><tr><th style="text-align:center">启动参数</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">–user-agent=”“</td><td style="text-align:center">设置请求头的User-Agent</td></tr><tr><td style="text-align:center">–window-size=长,宽</td><td style="text-align:center">设置浏览器分辨率</td></tr><tr><td style="text-align:center">–headless</td><td style="text-align:center">无界面运行</td></tr><tr><td style="text-align:center">–start-maximized</td><td style="text-align:center">最大化运行</td></tr><tr><td style="text-align:center">–incognito</td><td style="text-align:center">隐身模式</td></tr><tr><td style="text-align:center">–disable-javascript</td><td style="text-align:center">禁用javascript</td></tr><tr><td style="text-align:center">–disable-infobars</td><td style="text-align:center">禁用浏览器正在被自动化程序控制的提示</td></tr></tbody></table><p>chrome的禁用图片加载参数<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prefs = &#123;</span><br><span class="line">    <span class="string">'profile.default_content_setting_values'</span> : &#123;</span><br><span class="line">        <span class="string">'images'</span> : <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">options.add_experimental_option(<span class="string">'prefs'</span>,prefs)</span><br></pre></td></tr></table></figure><p></p><p>chrome 禁用浏览器弹窗<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prefs = &#123;  </span><br><span class="line">    <span class="string">'profile.default_content_setting_values'</span> :  &#123;  </span><br><span class="line">        <span class="string">'notifications'</span> : <span class="number">2</span>  </span><br><span class="line">     &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">options.add_experimental_option(<span class="string">'prefs'</span>,prefs)</span><br></pre></td></tr></table></figure><p></p><h4 id="Selenium-Driver操作"><a href="#Selenium-Driver操作" class="headerlink" title="Selenium Driver操作"></a>Selenium Driver操作</h4><h4 id="Driver对象常见操作"><a href="#Driver对象常见操作" class="headerlink" title="Driver对象常见操作"></a>Driver对象常见操作</h4><ul><li><p>get(url): 在当前浏览器会话中访问传入的url地址, driver.get(‘<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmFpZHUuY29tJiMzOTsp" title="https://www.baidu.com&#39;)">https://www.baidu.com&#39;)<i class="fa fa-external-link"></i></span>.</p></li><li><p>close(): 关闭浏览器当前窗口。</p></li><li><p>quit(): 退出webdriver并关闭所有窗口。</p></li><li><p>refresh(): 刷新当前页面。</p></li><li><p>title: 获取当前页的标题。</p></li><li><p>page_source: 获取当前页渲染后的源代码。</p></li><li><p>current_url: 获取当前页面的url。</p></li><li><p>window_handles: 获取当前会话中所有窗口的句柄。</p></li></ul><h4 id="Driver查找单个元素"><a href="#Driver查找单个元素" class="headerlink" title="Driver查找单个元素"></a>Driver查找单个元素</h4><table><thead><tr><th style="text-align:center">方法</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">find_element_by_xpath()</td><td style="text-align:center">通过Xpath查找</td></tr><tr><td style="text-align:center">find_element_by_class_name()</td><td style="text-align:center">通过class属性查找</td></tr><tr><td style="text-align:center">find_element_by_css_selector()</td><td style="text-align:center">通过css选择器查找</td></tr><tr><td style="text-align:center">find_element_by_id()</td><td style="text-align:center">通过id查找</td></tr><tr><td style="text-align:center">find_element_by_link_text()</td><td style="text-align:center">通过链接文本查找</td></tr><tr><td style="text-align:center">find_element_by_name()</td><td style="text-align:center">通过name属性进行查找</td></tr><tr><td style="text-align:center">find_element_by_partial_link_text()</td><td style="text-align:center">通过链接文本的部分匹配查找</td></tr><tr><td style="text-align:center">find_element_by_tag_name()</td><td style="text-align:center">通过标签名查找</td></tr></tbody></table><p>查找后返回的是一个Webelement对象。</p><p>查找多个元素: 将其中的element加上一个s，则是对应的多个查找方法。</p><p>上面的方法都是将第一个找到的元素进行返回，而将所有匹配的元素进行返回使用的是find_elements_by_*方法。</p><h4 id="Driver操作Cookie"><a href="#Driver操作Cookie" class="headerlink" title="Driver操作Cookie"></a>Driver操作Cookie</h4><ul><li><p>add_cookie(cookie_dict) : 给当前会话添加一个cookie。</p></li><li><p>cookie_dict: 一个字典对象，必须要有”name”和”value”两个键，可选的键有：“path”, “domain”, “secure”, “expiry” 。</p></li></ul><p>用法：<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">driver.add_cookie(&#123;‘name’ : ‘foo’, ‘value’ : ‘bar’&#125;)</span><br><span class="line">driver.add_cookie(&#123;‘name’ : ‘foo’, ‘value’ : ‘bar’, ‘path’ : ‘/’&#125;)</span><br><span class="line">driver.add_cookie(&#123;‘name’ : ‘foo’, ‘value’ : ‘bar’, ‘path’ : ‘/’, ‘secure’:<span class="literal">True</span>&#125;)</span><br></pre></td></tr></table></figure><p></p><ul><li><p>get_cookie(name): 按name获取单个Cookie，没有则返回None。</p></li><li><p>get_cookies(): 获取所有Cookie，返回的是一组字典。</p></li><li><p>delete_all_cookies(): 删除所有Cookies。</p></li><li><p>delete_cookie(name): 按name删除指定cookie。</p><h4 id="Driver获取截屏"><a href="#Driver获取截屏" class="headerlink" title="Driver获取截屏"></a>Driver获取截屏</h4></li></ul><ul><li>get_screenshot_as_base64(): 获取当前窗口的截图保存为一个base64编码的字符串。</li><li>get_screenshot_as_file(filename): 获取当前窗口的截图保存为一个png格式的图片，filename参数为图片的保存地址，最后应该以.png结尾。如果出现IO错误，则返回False。<br>用法: <code>driver.get_screenshot_as_file(‘/Screenshots/foo.png’)</code></li><li>get_screenshot_as_png(): 获取当前窗口的截图保存为一个png格式的二进制字符串。<h4 id="Driver获取窗口信息"><a href="#Driver获取窗口信息" class="headerlink" title="Driver获取窗口信息"></a>Driver获取窗口信息</h4></li><li><p>get_window_position(windowHandle=’current’): 获取当前窗口的x,y坐标。</p></li><li><p>get_window_rect(): 获取当前窗口的x,y坐标和当前窗口的高度和宽度。</p></li><li><p>get_window_size(windowHandle=’current’): 获取当前窗口的高度和宽度。</p></li></ul><h4 id="Driver切换操作"><a href="#Driver切换操作" class="headerlink" title="Driver切换操作"></a>Driver切换操作</h4><ul><li><p>switch_to_frame(frame_reference): 将焦点切换到指定的子框架中</p></li><li><p>switch_to_window(window_name): 切换窗口</p></li></ul><h4 id="Driver执行JS代码"><a href="#Driver执行JS代码" class="headerlink" title="Driver执行JS代码"></a>Driver执行JS代码</h4><ul><li><p>execute_async_script(script, *args) : 在当前的window/frame中异步执行JS代码。</p><ul><li>script：是你要执行的JS代码。</li><li>args：是你的JS代码执行要传入的参数。<br>用法：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">script = “var callback = arguments[arguments.length - <span class="number">1</span>]; ”</span><br><span class="line">script2 = “window.setTimeout(function()&#123; callback(‘timeout’) &#125;, <span class="number">3000</span>);” </span><br><span class="line">driver.execute_async_script(script + script2)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>execute_script(script, *args): 在当前的window/frame中同步执行JS代码。</p><ul><li>script：是你要执行的JS代码。</li><li>args：是你的JS代码执行要传入的参数。<h4 id="class含有空格时解决方法："><a href="#class含有空格时解决方法：" class="headerlink" title="class含有空格时解决方法："></a>class含有空格时解决方法：</h4>在实际进行元素定位时，经常发现class name是有多个class组合的复合类，中间以空格隔开。如果直接进行定位会出现报错，可以通过以下方式处理：</li></ul></li></ul><p>class属性唯一但是有空格，选择空格两边唯一的那一个<br>若空格隔开的class不唯一可以通过索引进行定位<br>self.driver.find_elements_by_class_name(‘table-dragColumn’)[0].click()<br>通过css方法进行定位（空格以‘.’代替）<br></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#前面加（.）空格地方用点（.）来代替</span></span><br><span class="line">self.driver.find_element_by_css_selector(<span class="string">'.dtb-style-1.table-dragColumns'</span>).click()</span><br><span class="line"><span class="comment">#包含整个类</span></span><br><span class="line">self.driver.find_element_by_css_selector(<span class="string">'class="dtb-style-1 table-dragColumns'</span>).click()</span><br></pre></td></tr></table></figure><p></p><h4 id="selenium三种-等待方式"><a href="#selenium三种-等待方式" class="headerlink" title="selenium三种 等待方式"></a>selenium三种 等待方式</h4><ol><li>强制等待<br>强制等待sleep(xx)，需要引入“time”模块</li><li>隐性等待<br>通过添加 implicitly_wait() 方法就可以方便的实现智能等待；<br>implicitly_wait(30) 的用法应该比 time.sleep() 更智能</li><li>显性等待<br>WebDriverWait，配合该类的until()和until_not()方法，就能够根据判断条件而进行灵活地等待了。<br>程序每隔xx秒看一眼，如果条件成立了，则执行下一步，否则继续等待，直到超过设置的最长时间，<br>然后抛出TimeoutException。<br>与until相反，until是当某元素出现或什么条件成立则继续执行，<br>until_not是当某元素消失或什么条件不成立则继续执行，参数也相同，不再赘述。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">self， 函数本身，在实际使用的时候不需要输入</span><br><span class="line">driver， webdriver的驱动程序，如（IE、FireFox、chrome、safari等）</span><br><span class="line">timeout，超时时间，默认以秒为单位</span><br><span class="line">poll_frequency，休眠时间（步长）的间隔，默认为<span class="number">0.5</span>秒，即检测元素是否存在的频率</span><br><span class="line">ignored_exceptions, 超时后的异常信息，默认情况下抛 “NoSuchElementException<span class="string">",大家可以定义忽略的异常信息</span></span><br><span class="line"><span class="string">WebDriverWait一般由until或until_not配合使用</span></span><br><span class="line"><span class="string">until(method,message="</span>)调用该方法提供的驱动程序做为一个参数，直到返回值不为<span class="literal">False</span></span><br><span class="line">until_not(method,message=<span class="string">")调用该方法提供的驱动程序做为一个参数，直到返回值为False</span></span><br></pre></td></tr></table></figure></li></ol><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">title</td><td style="text-align:center">用于获得当前页面的标题</td></tr><tr><td style="text-align:center">current_url</td><td style="text-align:center">用户获得当前页面的URL</td></tr><tr><td style="text-align:center">text</td><td style="text-align:center">获取搜索条目的文本信息</td></tr></tbody></table><p>Xpath&amp;Css定位方法速查表</p><table><thead><tr><th style="text-align:center">描述</th><th style="text-align:center">Xpath</th><th style="text-align:center">Css</th></tr></thead><tbody><tr><td style="text-align:center">直接子元素</td><td style="text-align:center">//div/a</td><td style="text-align:center">div &gt; a</td></tr><tr><td style="text-align:center">子元素或后代元素</td><td style="text-align:center">//div//a</td><td style="text-align:center">div a</td></tr><tr><td style="text-align:center">以id定位</td><td style="text-align:center">//div[@id=’idValue’]//a</td><td style="text-align:center">div#idValue a</td></tr><tr><td style="text-align:center">以class定位</td><td style="text-align:center">//div[@class=’classValue’]//a</td><td style="text-align:center">div.classValue a</td></tr><tr><td style="text-align:center">同级弟弟元素</td><td style="text-align:center">//ul/li[@class=’first’]/following-</td><td style="text-align:center">ul&gt;li.first + li</td></tr><tr><td style="text-align:center">属性</td><td style="text-align:center">//form/input[@name=’username’]</td><td style="text-align:center">form input[name=’username’]</td></tr><tr><td style="text-align:center">多个属性</td><td style="text-align:center">//input[@name=’continue’ and</td><td style="text-align:center">input[name=’continue’][type=’button</td></tr><tr><td style="text-align:center">第4个子元素</td><td style="text-align:center">//ul[@id=’list’]/li[4]</td><td style="text-align:center">ul#list li:nth-child(4)</td></tr><tr><td style="text-align:center">第1个子元素</td><td style="text-align:center">//ul[@id=’list’]/li[1]</td><td style="text-align:center">ul#list li:first-child</td></tr><tr><td style="text-align:center">最后1个子元素</td><td style="text-align:center">//ul[@id=’list’]/li[last()]</td><td style="text-align:center">ul#list li:last-child</td></tr><tr><td style="text-align:center">属性包含某字段</td><td style="text-align:center">//div[contains(@title,’Title’)]</td><td style="text-align:center">div[title*=”Title”]</td></tr><tr><td style="text-align:center">属性以某字段开头</td><td style="text-align:center">//input[starts-with(@name,’user’)]</td><td style="text-align:center">input[name^=”user”]</td></tr><tr><td style="text-align:center">属性以某字段结尾</td><td style="text-align:center">//input[ends-with(@name,’name’)]</td><td style="text-align:center">input[name$=”name”]</td></tr><tr><td style="text-align:center">text中包含某字段</td><td style="text-align:center">//div[contains(text(), ‘text’)]</td><td style="text-align:center">无法定位</td></tr><tr><td style="text-align:center">元素有某属性</td><td style="text-align:center">//div[@title]</td><td style="text-align:center">div[title]</td></tr><tr><td style="text-align:center">父节点</td><td style="text-align:center">//div/..</td><td style="text-align:center">无法定位</td></tr><tr><td style="text-align:center">同级哥哥节点</td><td style="text-align:center">//li/preceding-sibling::div[1]</td><td style="text-align:center">无法定位</td></tr></tbody></table><h4 id="python获取json"><a href="#python获取json" class="headerlink" title="python获取json"></a>python获取json</h4><p>class =self.param[‘class’]</p><p>for stu in class:<br> stuName =stu.param[‘stuName’]<br>//Todo</p></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/python/" rel="tag"># python</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/10/12/2019-10-12/" rel="next" title="总结(二)"><i class="fa fa-chevron-left"></i> 总结(二)</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2019/10/18/2019-10-18/" rel="prev" title="关于springboot的学习总结·购物车功能">关于springboot的学习总结·购物车功能<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> Overview</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Jack"><p class="site-author-name" itemprop="name">Jack</p><div class="site-description motion-element" itemprop="description">Jack's Ideas & Blogs</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">100</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories"><span class="site-state-item-count">18</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">17</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3poYW5nY3Y=" title="GitHub &rarr; https://github.com/zhangcv"><i class="fa fa-fw fa-github"></i> GitHub</span></span><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS96aGFuZ2N2MjAxNw==" title="Twitter &rarr; https://twitter.com/zhangcv2017"><i class="fa fa-fw fa-twitter"></i> Twitter</span></span></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Python"><span class="nav-number">1.</span> <span class="nav-text">Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python运算符"><span class="nav-number">1.1.</span> <span class="nav-text">python运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程控制"><span class="nav-number">1.2.</span> <span class="nav-text">流程控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selenium的介绍及使用"><span class="nav-number">1.3.</span> <span class="nav-text">Selenium的介绍及使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#启动"><span class="nav-number">1.3.1.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Selenium-Driver操作"><span class="nav-number">1.3.2.</span> <span class="nav-text">Selenium Driver操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver对象常见操作"><span class="nav-number">1.3.3.</span> <span class="nav-text">Driver对象常见操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver查找单个元素"><span class="nav-number">1.3.4.</span> <span class="nav-text">Driver查找单个元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver操作Cookie"><span class="nav-number">1.3.5.</span> <span class="nav-text">Driver操作Cookie</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver获取截屏"><span class="nav-number">1.3.6.</span> <span class="nav-text">Driver获取截屏</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver获取窗口信息"><span class="nav-number">1.3.7.</span> <span class="nav-text">Driver获取窗口信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver切换操作"><span class="nav-number">1.3.8.</span> <span class="nav-text">Driver切换操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Driver执行JS代码"><span class="nav-number">1.3.9.</span> <span class="nav-text">Driver执行JS代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#class含有空格时解决方法："><span class="nav-number">1.3.10.</span> <span class="nav-text">class含有空格时解决方法：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#selenium三种-等待方式"><span class="nav-number">1.3.11.</span> <span class="nav-text">selenium三种 等待方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#python获取json"><span class="nav-number">1.3.12.</span> <span class="nav-text">python获取json</span></a></li></ol></li></ol></li></ol></div></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Jack</span></div> "<div class="powered-by">Powered by <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> v3.8.0</div> <span class="post-meta-divider">|</span><div class="theme-info">Theme – <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0Lm9yZw==">NexT.Muse</span> v7.0.1</div> "<br><script type="text/javascript">var cnzz_s_tag=document.createElement("script");cnzz_s_tag.type="text/javascript",cnzz_s_tag.async=!0,cnzz_s_tag.charset="utf-8",cnzz_s_tag.src="https://w.cnzz.com/c.php?id=1276883782&async=1";var root_s=document.getElementsByTagName("script")[0];root_s.parentNode.insertBefore(cnzz_s_tag,root_s)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> <span class="post-meta-divider">|</span> <span id="busuanzi_container_site_uv">本站访客数<span id="busuanzi_value_site_uv"></span>人</span><br> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("04/01/2019 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="Run for "+dnum+" Days ",document.getElementById("times").innerHTML=hnum+" Hours "+mnum+" m "+snum+" s"}setInterval("createtime()",250)</script></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/VEN/jquery/index.js?v=2.1.3"></script><script src="/VEN/velocity/velocity.min.js?v=1.2.1"></script><script src="/VEN/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.0.1"></script><script src="/js/motion.js?v=7.0.1"></script><script src="/js/schemes/muse.js?v=7.0.1"></script><script src="/js/next-boot.js?v=7.0.1"></script><script src="/js/exturl.js?v=7.0.1"></script><script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></body></html>